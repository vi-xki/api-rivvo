generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
}

model budget {
  id          String   @id @default(uuid())
  limitAmount Float
  month       String
  userId      String   @unique(map: "Budget_userId_key")
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  user        user     @relation(fields: [userId], references: [id], map: "Budget_userId_fkey")
}

model category {
  id               String             @id @default(uuid())
  name             String
  icon             String
  color            String
  userId           String
  createdAt        DateTime           @default(now())
  updatedAt        DateTime @updatedAt
  user             user               @relation(fields: [userId], references: [id], map: "Category_userId_fkey")
  expense          expense[]
  recurringexpense recurringexpense[]

  @@unique([userId, name], map: "Category_userId_name_key")
}

model expense {
  id         String   @id @default(uuid())
  amount     Float
  note       String?
  date       DateTime @default(now())
  categoryId String
  userId     String
  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt
  category   category @relation(fields: [categoryId], references: [id], map: "Expense_categoryId_fkey")
  user       user     @relation(fields: [userId], references: [id], map: "Expense_userId_fkey")

  @@index([categoryId], map: "Expense_categoryId_fkey")
  @@index([userId], map: "Expense_userId_fkey")
}

model recurringexpense {
  id         String   @id @default(uuid())
  amount     Float
  note       String?
  dayOfMonth Int
  categoryId String
  userId     String
  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt
  category   category @relation(fields: [categoryId], references: [id], map: "RecurringExpense_categoryId_fkey")
  user       user     @relation(fields: [userId], references: [id], map: "RecurringExpense_userId_fkey")

  @@index([categoryId], map: "RecurringExpense_categoryId_fkey")
  @@index([userId], map: "RecurringExpense_userId_fkey")
}

model user {
  id               String             @id @default(uuid())
  email            String             @unique(map: "User_email_key")
  password         String
  name             String
  currency         String             @default("USD")
  createdAt        DateTime           @default(now())
  updatedAt        DateTime @updatedAt
  budget           budget?
  category         category[]
  expense          expense[]
  recurringexpense recurringexpense[]
}
